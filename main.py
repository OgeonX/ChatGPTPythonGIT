
1. Move the code for loading environment variables and for testing the API keys to a separate file, where it can be imported and re-used. 
2. Move the code for logging errors to a separate logging module, and only import the logging module when needed. 
3. Move the code for uploading the modified code to GitHub to a separate utility module, and only import the utility module when needed. 
4. Move the code for generating the prompt with code to a separate function, and only call the function when needed. 
5. Move the list comprehension for listing all .py files in the directory to a separate list of files, and only iterate over the list when needed. 
6. Add comments to the code so that it is easier to maintain.